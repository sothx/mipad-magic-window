import{d as e,r as a,L as t,a9 as l,b as o,b6 as s,b7 as n,b8 as r,F as i,m as u,U as p,b9 as d,ba as c,J as v,bb as w,c as g}from"./apis-DsJdDvn7.js";import{B as m,x as b,y as f,z as y,aq as _}from"./hooks-BxsNnlgv.js";import{d as h}from"./index-BbkWOkC_.js";const k=e({__name:"DotBlackListAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(e,{expose:k,emit:D}){const x=h();a(null),a(null);const C=e,P=a(!1),M=t();m(),l();const U=o(()=>({theme:M.isDarkMode?b:f})),{message:j,modal:z}=y(["message","modal"],{configProviderProps:U});let B,L;const N=a({openDrawer:e=>new Promise((a,t)=>{if("update"===C.type&&!e)return t(new Error("更新模式下必须传入初始化参数")),void j.error("初始化参数不能为空");B=a,L=t,T.value="",P.value=!0}),closeDrawer:()=>{P.value=!1,L("Drawer closed without submission")}}),T=a(""),q=a(""),A=a(!1);return k({openDrawer:N.value.openDrawer}),(e,a)=>{const t=s("n-input-group-label"),l=s("n-input"),o=s("n-input-group"),m=s("n-alert"),b=s("n-button"),f=s("n-drawer-content"),y=s("n-drawer");return r(),n(i,null,[u(e.$slots,"default",d(c({openDrawer:N.value.openDrawer}))),p(y,{show:P.value,"onUpdate:show":a[3]||(a[3]=e=>P.value=e),width:v(M).windowWidth>=640?"450px":"100%",placement:"right"},{default:w(()=>[p(f,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:C.title,closable:""},{footer:w(()=>[p(b,{type:"info",loading:A.value,"onUpdate:loading":a[1]||(a[1]=e=>A.value=e),onClick:a[2]||(a[2]=()=>(async()=>{if(!T.value)return void z.create({title:"应用包名不能为空",type:"error",preset:"dialog",content:()=>p("p",null,[g("噫？应用包名不能为空（敲")])});if(x.allPackageName.has(T.value))return void z.create({title:"应用包名已存在",type:"error",preset:"dialog",content:()=>p("p",null,[g("噫？这个应用包名已经存在列表中了（敲")])});A.value=!0;const e=()=>{A.value=!1},a={name:T.value,loadingCallback:e,closeCallback:()=>{A.value=!1,P.value=!1}};z.create({title:"确认隐藏窗口控制器吗？",type:"warning",preset:"dialog",content:()=>p("p",null,[g("窗口控制器的隐藏受小米云控规则下发影响，如果隐藏窗口控制器失效，请重新操作")," ",p("span",{class:"font-bold "+(M.isDarkMode?"text-teal-400":"text-gray-600")},[g("热重载应用数据")])," ",g("，如后续需要恢复")," ",p("span",{class:"font-bold "+(M.isDarkMode?"text-teal-400":"text-gray-600")},[g("窗口控制器")])," ",g("的显示，则需要先清除自定义规则，确定要继续吗？")]),positiveText:"确定隐藏",negativeText:"我再想想",onPositiveClick:async()=>{B(a)},onNegativeClick(){e()},onMaskClick(){e()},onClose(){e()}})})())},{default:w(()=>a[6]||(a[6]=[g(" 提交 ")])),_:1,__:[6]},8,["loading"])]),default:w(()=>[p(o,null,{default:w(()=>[p(t,{size:"large"},{default:w(()=>a[4]||(a[4]=[g("应用包名")])),_:1,__:[4]}),p(l,{size:"large",status:q.value,value:T.value,"onUpdate:value":a[0]||(a[0]=e=>T.value=e),"allow-input":e=>_(e),readonly:"update"===C.type,placeholder:"请输入应用包名"},null,8,["status","value","allow-input","readonly"])]),_:1}),p(m,{"show-icon":!1,bordered:!1,title:"隐藏窗口控制器",type:"info",class:"mt-5"},{default:w(()=>a[5]||(a[5]=[g(" 添加后，应用上方的窗口控制器将被隐藏 ")])),_:1,__:[5]})]),_:1},8,["title"])]),_:1},8,["show","width"])],64)}}});export{k as _};
