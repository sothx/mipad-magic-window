import{_ as e}from"./all_app-D39sbeUz.js";import{B as a,x as t,y as l,z as o,as as n,q as r,aE as i,p as s,F as d,ak as c,U as u}from"./hooks-BxsNnlgv.js";import{b7 as p,b8 as g,bg as m,d as v,r as _,L as f,a9 as y,b,b6 as h,F as k,m as w,U as T,b9 as x,ba as C,J as O,bb as I,c as M,bc as R,bd as A,bf as S,h as D,be as z,dc as G,dd as N,cH as j,M as P,di as U,bS as B,dj as E,ad as V}from"./apis-DsJdDvn7.js";import{d as L,u as W}from"./index-BbkWOkC_.js";import{c as Y,h as H,j as K}from"./lodash-CIZQSGu2.js";import{r as Q}from"./PlusIcon-tVfHuLqa.js";import{r as F}from"./ArrowPathIcon-D1R7f53I.js";import{r as X}from"./CpuChipIcon-17pPnf66.js";import{r as Z}from"./BoltIcon-BAzKGNSB.js";import{r as q,a as J}from"./XCircleIcon-DuGyH0YV.js";import{r as $}from"./Cog6ToothIcon-Bg_LpETR.js";import"./iconfont-CKH9wMaD.js";import"./pako-__J333JV.js";function ee(e,a){return g(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[m("path",{"fill-rule":"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z","clip-rule":"evenodd"}),m("path",{d:"M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"})])}const ae=H({RATIO_FULLSCREEN:"0.0",RATIO_16_TO_9:"1.7777778",RATIO_4_TO_3:"1.3333333",RATIO_21_TO_9:"2.3333333",RATIO_32_TO_9:"3.5555556"}),te={RATIO_FULLSCREEN:{type:"info",name:"全屏",color:{}},RATIO_16_TO_9:{type:"error",name:"16:9",color:{}},RATIO_4_TO_3:{type:"success",name:"4:3",color:{}},RATIO_21_TO_9:{type:"warning",name:"21:9",color:{}},RATIO_32_TO_9:{type:"primary",name:"32:9",color:{color:"rgba(255, 105, 180, 0.1)",borderColor:"rgba(255, 105, 180, 0.3)",textColor:"#ff69b4"}}},le=e=>{console.log(e,"inputArr");const a=Y(e);let t=Object.entries(ae).map(([e,a])=>{const t=te[a];return{label:t.name,value:e,type:t.type,color:t.color}});return a&&(t=[...t,...a]),t},oe=H({GRAVITY_CENTER:17,GRAVITY_TOP:48,GRAVITY_BOTTOM:80}),ne={GRAVITY_CENTER:{color:"info",name:"居中显示"},GRAVITY_TOP:{color:"success",name:"居顶显示"},GRAVITY_BOTTOM:{color:"error",name:"居底显示"}},re=()=>Object.entries(oe).map(([e,a])=>{const t=ne[a];return{label:t.name,value:e,color:t.color}}),ie=v({__name:"GameBoosterAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(e,{expose:n,emit:r}){L(),_(null),_(null);const i=e,s=_(!1),d=le([{label:"自定义",value:"custom",type:"primary",color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}}]),c=K(d,e=>e.value),u=re(),m=K(u,e=>e.value),v=f();a(),y();const D=b(()=>({theme:v.isDarkMode?t:l})),{message:z,modal:G}=o(["message","modal"],{configProviderProps:D});let N,j;const P=_({openDrawer:e=>new Promise((a,t)=>{if("update"===i.type&&!e)return t(new Error("更新模式下必须传入初始化参数")),void z.error("初始化参数不能为空");"update"===i.type&&(B.value=e?.packageName||"",U.value=e?.appName||"",e?.gameGravity&&(E.value=m[e.gameGravity]),e?.gameRatio&&(c[e.gameRatio]?(V.value=c[e.gameRatio],W.value=e.gameRatio):(V.value=c.custom,W.value=e.gameRatio))),N=a,j=t,s.value=!0}),closeDrawer:()=>{s.value=!1,j("Drawer closed without submission")}}),U=_(""),B=_(""),E=_(u[0]),V=_(d[0]),W=_(""),Y=(e,a)=>{"custom"!==a.value||v.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO?(V.value=a,"custom"===a.value?W.value="":W.value=a.value):G.create({title:"无使用权限",type:"warning",preset:"dialog",content:()=>T("div",null,[T("p",null,[M("自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封！")]),T("p",null,[M("如仍然坚持使用自定义游戏比例，请前往模块设置导入激活口令激活自定义游戏比例：")]),T("p",null,[M("eNqrVnJ39HWNd/L3Dw5xDYp3Dg0O8feND3IM8fRXsiopKk2tBQC2Pwrm")])])})},H=(e,a)=>{E.value=a},Q=_(!1);return n({openDrawer:P.value.openDrawer}),(e,a)=>{const t=h("n-input-group-label"),l=h("n-input"),o=h("n-input-group"),n=h("n-button"),r=h("n-dropdown"),c=h("n-tag"),m=h("n-card"),_=h("n-drawer-content"),f=h("n-drawer");return g(),p(k,null,[w(e.$slots,"default",x(C({openDrawer:P.value.openDrawer}))),T(f,{show:s.value,"onUpdate:show":a[7]||(a[7]=e=>s.value=e),width:O(v).windowWidth>=640?"450px":"100%",placement:"right"},{default:I(()=>[T(_,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:i.title,closable:""},{footer:I(()=>[T(n,{type:"info",loading:Q.value,"onUpdate:loading":a[5]||(a[5]=e=>Q.value=e),onClick:a[6]||(a[6]=()=>(async()=>{if(!W.value)return void G.create({title:"游戏显示比例不能为空",type:"error",preset:"dialog",content:()=>T("p",null,[M("噫？游戏显示比例不能为空（敲")])});Q.value=!0;const e=()=>{Q.value=!1,s.value=!1},a=()=>{Q.value=!1},t={appName:U.value,packageName:B.value,gameGravity:E.value.value,gameRatio:W.value,loadingCallback:a,closeCallback:e};G.create({title:"确认调整游戏显示布局吗？",type:"warning",preset:"dialog",content:()=>T("p",null,[M("调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。确定要继续吗？")]),positiveText:"确定调整",negativeText:"我再想想",onPositiveClick:async()=>{N(t),a(),e()},onNegativeClick(){a()},onMaskClick(){a()},onClose(){a()}})})())},{default:I(()=>a[11]||(a[11]=[M(" 提交 ")])),_:1,__:[11]},8,["loading"])]),default:I(()=>[T(o,null,{default:I(()=>[T(t,{size:"large"},{default:I(()=>a[8]||(a[8]=[M("游戏名称")])),_:1,__:[8]}),T(l,{size:"large",value:U.value,"onUpdate:value":a[0]||(a[0]=e=>U.value=e),readonly:!0,placeholder:"请输入游戏名称"},null,8,["value"])]),_:1}),T(o,{class:"mt-5"},{default:I(()=>[T(t,{size:"large"},{default:I(()=>a[9]||(a[9]=[M("游戏包名")])),_:1,__:[9]}),T(l,{size:"large",value:B.value,"onUpdate:value":a[1]||(a[1]=e=>B.value=e),readonly:!0,placeholder:"请输入游戏包名"},null,8,["value"])]),_:1}),T(m,{bordered:!1,title:"游戏显示比例",size:"small"},{default:I(()=>[T(r,{value:V.value,"onUpdate:value":a[2]||(a[2]=e=>V.value=e),size:"large",trigger:"click",options:O(d),onSelect:Y},{default:I(()=>[T(n,{block:"",type:V.value.type,color:V.value.color?.textColor,dashed:""},{default:I(()=>[M(S(V.value.label),1)]),_:1},8,["type","color"])]),_:1},8,["value","options"]),T(o,{class:"mt-5"},{default:I(()=>[T(l,{type:"number",ref:"currentCustomGameRatioRef",readonly:"custom"!==V.value.value,value:W.value,"onUpdate:value":a[3]||(a[3]=e=>W.value=e),placeholder:"请输入游戏显示比例"},null,8,["readonly","value"])]),_:1}),"custom"===V.value.value?(g(),R(c,{key:0,class:"mt-5",bordered:!1,type:"info"},{default:I(()=>a[10]||(a[10]=[M(" 参考计算公式：21:9=21%9≈2.3333333 ")])),_:1,__:[10]})):A("",!0)]),_:1}),T(m,{bordered:!1,title:"游戏显示位置",size:"small"},{default:I(()=>[T(r,{value:E.value,"onUpdate:value":a[4]||(a[4]=e=>E.value=e),size:"large",trigger:"click",options:O(u),onSelect:H},{default:I(()=>[T(n,{block:"",type:E.value.color,dashed:""},{default:I(()=>[M(S(E.value.label),1)]),_:1},8,["type"])]),_:1},8,["value","options"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show","width"])],64)}}}),se={class:"autoui-view mb-10"},de={class:"mt-3"},ce={class:"mb-3 px-4 sm:px-0"},ue={class:"mb-3 flex flex-wrap"},pe={class:"flex flex-wrap"},ge={class:"flex flex-wrap"},me=v({__name:"GameBooster",setup(a){const v=_(null),y=[{title:"游戏名称",minWidth:250,key:"name",render:(e,a)=>T("div",null,[e.app_name&&T("p",null,[e.app_name]),e.app_name&&T("p",null,[T("span",{class:{hidden:!e.app_name}},[M("(")]),e.package_name,T("span",{class:{hidden:!e.app_name}},[M(")")])])])},{title:"游戏显示比例",minWidth:150,key:"game_ratio",render:(e,a)=>oe[e.game_ratio]&&oe[e.game_ratio].label?T(h("n-tag"),{dashed:!0,type:oe[e.game_ratio].type,color:oe[e.game_ratio].color},{default:()=>[oe[e.game_ratio].label]}):T(h("n-tag"),{dashed:!0,color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}},{default:()=>[M("自定义")]})},{title:"游戏显示位置",minWidth:150,key:"game_gravity",render:(e,a)=>T(h("n-tag"),{dashed:!0,type:me[e.game_gravity].color},{default:()=>[me[e.game_gravity].label]})},{title:"操作",minWidth:100,key:"setting",render(e,a){const t={icon:$};return T(h("n-button"),{onClick:()=>(async e=>{const[a]=await P(ve.vaildModuleVersion());if(!a)if(ve.isSupportGameMode.value){if(_e.value){const[a,t]=await P(_e.value.openDrawer({appName:e.app_name,packageName:e.package_name,gameRatio:e.game_ratio,gameGravity:e.game_gravity}));if(a)console.log("操作取消:",a);else if(t){H.loading=!0;const[a,l]=await P(E(t.packageName,t.gameRatio,t.gameGravity));a&&(L.create({title:"更新设置失败",type:"error",preset:"dialog",content:()=>T("p",null,[M("发生异常错误，更新失败了QwQ，详细错误请查看错误日志~")])}),H.loading=!1),l&&(H.loading=!1,L.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>T("p",null,[M("好耶w，已经成功配置")," ",T("span",{class:"font-bold "+(w.isDarkMode?"text-teal-400":"text-gray-600")},[t.appName])," ",M("的游戏显示布局了OwO~实际生效还需要重启")," ",T("span",{class:"font-bold "+(w.isDarkMode?"text-teal-400":"text-gray-600")},[t.appName])," ",M("和")," ",T("span",{class:"font-bold "+(w.isDarkMode?"text-teal-400":"text-gray-600")},[M("平板/手机管家")])," ",M("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){V(e.package_name).then(async e=>{await H.initDefault(),L.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>T("p",null,[M("已经成功为你重启对应的作用域，请查看是否生效~")])})}).catch(e=>{L.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>T("p",null,[M("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})})}}))}}}else L.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>T("p",null,[M("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){x.push({name:"settings",hash:"#gameModeSettings"}).then(()=>{const e=new MutationObserver(()=>{const a=document.getElementById("gameModeSettings");a&&setTimeout(()=>{a.scrollIntoView({behavior:"smooth",block:"center"}),e.disconnect()},0)});e.observe(document.body,{childList:!0,subtree:!0})})}})})(e),size:"small",strong:!0,dashed:!0,type:"info"},{default:()=>[M("管理")],...t})}}],w=f(),x=W();n();const C=b(()=>({theme:w.isDarkMode?t:l})),{message:S,modal:L,notification:Y}=o(["message","modal","notification"],{configProviderProps:C}),H=r(),ae=i(),te=le(),oe=K(te,e=>e.value),ne=re(),me=K(ne,e=>e.value),ve=s(),_e=_(null),fe=()=>{x.push({name:"display-mode-record"})},ye=D({page:1,pageSize:10,simple:!0,showSizePicker:!0,onChange:e=>{ye.page=e},onUpdatePageSize:e=>{ye.pageSize=e,ye.page=1}});return(a,t)=>{const l=h("n-alert"),o=h("n-dropdown"),n=h("n-input-group"),r=h("n-card"),i=h("n-data-table");return g(),p(k,null,[m("main",se,[m("div",de,[m("div",ce,[t[9]||(t[9]=m("h3",{class:z("text-base font-semibold leading-7")},[m("span",{class:"animated-bg bg-clip-text font-semibold text-transparent",style:{"background-image":"linear-gradient(\r\n\t\t\t\t\t\t\t\t101.22deg,\r\n\t\t\t\t\t\t\t\trgb(255, 182, 133) -18.32%,\r\n\t\t\t\t\t\t\t\trgb(255, 111, 29) 7.01%,\r\n\t\t\t\t\t\t\t\trgb(252, 181, 232) 41.59%,\r\n\t\t\t\t\t\t\t\trgb(135, 148, 255) 70.98%,\r\n\t\t\t\t\t\t\t\trgb(60, 112, 255) 91.35%,\r\n\t\t\t\t\t\t\t\trgb(60, 112, 255) 110.17%\r\n\t\t\t\t\t\t\t)"}},"游戏显示布局")],-1)),m("p",{class:z("mt-1 max-w-2xl text-sm leading-6 "+(O(w).isDarkMode?"text-gray-300":"text-gray-500"))}," 游戏显示布局，改变游戏比例，获得更大的游戏视野。 ",2)])]),T(r,{size:"small"},{default:I(()=>[m("div",ue,["tablet"===O(w).deviceType?(g(),R(l,{key:0,"show-icon":!0,type:"info"},{default:I(()=>[t[11]||(t[11]=m("p",null,"请添加需要管理的游戏应用到游戏工具箱，Hyper OS 2.0+还需要安装修改版的手机/平板管家才会生效。",-1)),t[12]||(t[12]=m("p",null,"修改版的手机/平板管家支持Hyper OS 2.0/1.0和MIUI 14:",-1)),t[13]||(t[13]=m("p",null,"[Tips:修改版手机管家支持在小米平板使用全局侧边栏]",-1)),T(O(d),{strong:"",secondary:"",type:"info",onClick:t[0]||(t[0]=()=>(async()=>{L.create({title:"获取手机/平板管家",type:"info",preset:"dialog",content:()=>T("div",null,[T("p",null,[M("如果规则无法生效，还需要安装修改版的手机/平板管家才会生效，安装后如出现崩溃等异常，推荐清空管家数据并重启设备再尝试~")]),T("p",null,[M("(Tips:需搭配核心破解并通过MT管理器安装)")]),T("p",null,[M("下载地址:https://caiyun.139.com/m/i?135Cm3g2XOMGs")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135Cm3g2XOMGs"),B()},onNegativeClick:()=>{}})})())},{default:I(()=>t[10]||(t[10]=[M("获取修改版手机/平板管家")])),_:1,__:[10]})]),_:1,__:[11,12,13]})):A("",!0)]),m("div",pe,[T(O(d),{class:"mb-3 mr-3",type:"info",loading:O(w).loading||O(H).loading,onClick:t[1]||(t[1]=()=>(async()=>{const[e]=await P(ve.vaildModuleVersion());if(e)return;if(!ve.isSupportGameMode.value)return void L.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>T("p",null,[M("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){x.push({name:"settings",hash:"#gameModeSettings"}).then(()=>{const e=new MutationObserver(()=>{const a=document.getElementById("gameModeSettings");a&&setTimeout(()=>{a.scrollIntoView({behavior:"smooth",block:"center"}),e.disconnect()},0)});e.observe(document.body,{childList:!0,subtree:!0})})}});const[a,t]=await P(U());a&&L.create({title:"操作失败",type:"error",preset:"dialog",content:()=>T("p",null,[M("发生异常错误，详细错误请查看日志~")])})})())},{icon:I(()=>[T(O(c),null,{default:I(()=>[T(O(Q))]),_:1})]),default:I(()=>[t[14]||(t[14]=M(" 添加游戏 "))]),_:1,__:[14]},8,["loading"]),T(O(d),{class:"mb-3 mr-3",type:"success",loading:O(w).loading||O(H).loading,onClick:t[2]||(t[2]=()=>(async()=>{await H.initDefault()})())},{icon:I(()=>[T(O(c),null,{default:I(()=>[T(O(F))]),_:1})]),default:I(()=>[t[15]||(t[15]=M(" 刷新游戏列表 "))]),_:1,__:[15]},8,["loading"])]),m("div",ge,[!O(w).MIOSVersion||O(w).MIOSVersion&&O(w).MIOSVersion<2||O(w).androidTargetSdk<35?(g(),R(o,{key:0,size:"large",trigger:"click",options:[{label:"打开性能监视器",key:"start"},{label:"关闭性能监视器",key:"stop"}],onSelect:t[3]||(t[3]=e=>{G(e)})},{default:I(()=>[T(O(d),{class:"mb-3 mr-3",color:"#8a2be2",type:"info",secondary:"",loading:O(w).loading||O(H).loading},{icon:I(()=>[T(O(c),null,{default:I(()=>[T(O(X))]),_:1})]),default:I(()=>[t[16]||(t[16]=M(" 性能监视器 "))]),_:1,__:[16]},8,["loading"])]),_:1})):A("",!0),T(o,{size:"large",trigger:"click",options:[{label:"打开刷新率监视器",key:"open"},{label:"关闭刷新率监视器",key:"close"}],onSelect:t[4]||(t[4]=e=>{N("open"===e)})},{default:I(()=>[T(O(d),{class:"mb-3 mr-3",type:"info",secondary:"",loading:O(w).loading||O(H).loading},{icon:I(()=>[T(O(c),null,{default:I(()=>[T(O(Z))]),_:1})]),default:I(()=>[t[17]||(t[17]=M(" 刷新率监视器 "))]),_:1,__:[17]},8,["loading"])]),_:1}),O(ae).formatDisplayModeList.value.length?(g(),R(O(d),{key:1,class:"mb-3 mr-3",type:"success",secondary:"",loading:O(w).loading||O(H).loading,onClick:fe},{icon:I(()=>[T(O(c),null,{default:I(()=>[T(O(ee))]),_:1})]),default:I(()=>[t[18]||(t[18]=M(" 分辨率及刷新率 "))]),_:1,__:[18]},8,["loading"])):A("",!0),T(O(d),{class:"mb-3 mr-3",type:"warning",secondary:"",loading:O(w).loading||O(H).loading,onClick:t[5]||(t[5]=()=>j())},{icon:I(()=>[T(O(c),null,{default:I(()=>t[19]||(t[19]=[m("img",{src:e},null,-1)])),_:1,__:[19]})]),default:I(()=>[t[20]||(t[20]=M(" 应用抽屉 "))]),_:1,__:[20]},8,["loading"])]),T(n,null,{default:I(()=>[T(O(u),{size:"large",clearable:"",value:O(H).searchKeyWord,"onUpdate:value":t[6]||(t[6]=e=>O(H).searchKeyWord=e),ref_key:"searchKeyWordInput",ref:v,placeholder:"搜索游戏名称/游戏包名",style:{width:"80%"}},null,8,["value"]),T(O(d),{size:"large",type:"primary",onClick:t[7]||(t[7]=()=>{v.value?.blur()})},{icon:I(()=>[T(O(c),null,{default:I(()=>[T(O(q))]),_:1})]),default:I(()=>[t[21]||(t[21]=m("span",{class:"hidden sm:inline-block"},"搜索",-1))]),_:1,__:[21]}),T(O(d),{size:"large",bordered:"",onClick:t[8]||(t[8]=()=>{O(H).searchKeyWord=""})},{icon:I(()=>[T(O(c),null,{default:I(()=>[T(O(J))]),_:1})]),default:I(()=>[t[22]||(t[22]=m("span",{class:"hidden sm:inline-block"},"清空",-1))]),_:1,__:[22]})]),_:1})]),_:1}),T(i,{size:"small",loading:O(w).loading||O(H).loading,columns:O(y),class:"mt-3",data:O(H).filterGameBoosterList,pagination:ye},null,8,["loading","columns","data","pagination"])]),T(ie,{ref_key:"updateGameBoosterAppDrawer",ref:_e,type:"update",title:"更新设置"},null,512)],64)}}});export{me as default};
