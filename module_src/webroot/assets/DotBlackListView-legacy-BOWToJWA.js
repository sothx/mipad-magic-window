!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach(function(e){r(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function r(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,a=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var i=r&&r.prototype instanceof u?r:u,s=Object.create(i.prototype);return c(s,"_invoke",function(n,r,a){var o,i,c,u=0,s=a||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,i=0,c=t,p.n=n,l}};function d(n,r){for(i=n,c=r,e=0;!f&&u&&!a&&e<s.length;e++){var a,o=s[e],d=p.p,g=o[2];n>3?(a=g===r)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=d&&((a=n<2&&d<o[1])?(i=0,p.v=r,p.n=o[1]):d<g&&(a=n<3||o[0]>r||r>g)&&(o[4]=n,o[5]=r,p.n=g,i=0))}if(a||n>1)return l;throw f=!0,r}return function(a,s,g){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,g),i=s,c=g;(e=i<2?t:c)||!f;){o||(i?i<3?(i>1&&(p.n=-1),d(i,c)):p.n=c:p.v=c);try{if(u=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==l)break}catch(e){o=t,i=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,a,o),!0),s}var l={};function u(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(c(e={},r,function(){return this}),e),d=f.prototype=u.prototype=Object.create(p);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=f,c(d,"constructor",f),c(f,"constructor",s),s.displayName="GeneratorFunction",c(f,a,"GeneratorFunction"),c(d),c(d,a,"Generator"),c(d,r,function(){return this}),c(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:g}})()}function c(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}c=function(t,e,n,r){if(e)a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var o=function(e,n){c(t,e,function(t){return this._invoke(e,n,t)})};o("next",0),o("throw",1),o("return",2)}},c(t,e,n,r)}function l(t,e,n,r,a,o,i){try{var c=t[o](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(t){l(o,r,a,i,c,"next",t)}function c(t){l(o,r,a,i,c,"throw",t)}i(void 0)})}}System.register(["./all_app-legacy-Djt4WKYO.js","./index-legacy-CAH0K7HM.js","./apis-legacy-DcnQWmba.js","./hooks-legacy-BaLahplN.js","./DotBlackListAppDrawer.vue_vue_type_script_setup_true_lang-legacy-DOuiKlZ4.js","./format-legacy-DYLy-7qF.js","./pako-legacy-CBMIRv01.js","./PlusIcon-legacy-BMokXNsX.js","./ArrowPathIcon-legacy-D2M_cZHp.js","./FunnelIcon-legacy-0VcCxy-T.js","./QuestionMarkCircleIcon-legacy-JgiuLyYd.js","./ShareIcon-legacy-LGImmnnA.js","./XCircleIcon-legacy-M1trmF1A.js","./iconfont-legacy-DhL-nNyD.js","./lodash-legacy-FWutsFSa.js"],function(t,e){"use strict";var r,o,c,l,s,f,p,d,g,y,m,v,b,k,h,w,x,_,D,L,M,T,O,j,B,C,P,S,Q,I,A,H,N,U,z,R,W,V,K,E,F,G,J,Z,q,X,$,Y,tt,et,nt,rt,at,ot;return{setters:[function(t){r=t._},function(t){o=t.d,c=t.u,l=t.a},function(t){s=t.b5,f=t.b6,p=t.be,d=t.d,g=t.r,y=t.L,m=t.b,v=t.a7,b=t.h,k=t.b4,h=t.U,w=t.bc,x=t.J,_=t.b9,D=t.bb,L=t.c,M=t.bd,T=t.ba,O=t.cm,j=t.M,B=t.d1,C=t.bn,P=t.a6,S=t.l,Q=t.cn,I=t.cl},function(t){A=t.B,H=t.as,N=t.x,U=t.y,z=t.z,R=t.av,W=t.F,V=t.ak,K=t.U},function(t){E=t._},function(t){F=t.b,G=t.a},function(t){J=t.p},function(t){Z=t.r},function(t){q=t.r},function(t){X=t.r,$=t.a,Y=t.b,tt=t.c},function(t){et=t.r,nt=t.a},function(t){rt=t.r},function(t){at=t.r,ot=t.a},null,null],execute:function(){function e(t,e){return f(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8.25V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18V8.25m-18 0V6a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6ZM7.5 6h.008v.008H7.5V6Zm2.25 0h.008v.008H9.75V6Z"})])}var it={class:"autoui-view mb-10"},ct={class:"mt-3"},lt={class:"mb-3 px-4 sm:px-0"},ut={key:0,class:"mb-3 flex flex-wrap"},st={class:"flex flex-wrap"},ft={class:"flex flex-wrap"};t("default",d({__name:"DotBlackListView",setup:function(t){var d=g(null),pt=[{title:"应用名称",minWidth:250,key:"name",render:function(t,e){return h("div",null,[t.applicationName&&h("p",null,[t.applicationName]),t.name&&h("p",null,[h("span",{class:{hidden:!t.applicationName}},[L("(")]),t.name,h("span",{class:{hidden:!t.applicationName}},[L(")")])])])}},{title:"规则状态",width:150,key:"isOptimizeWebView",render:function(t,e){return t.status?h(k("n-tag"),{bordered:!1,dashed:!0,type:"success"},{default:function(){return[L("已生效")]}}):h(k("n-tag"),{bordered:!1,dashed:!0,type:"info"},{default:function(){return[L("未生效")]}})}},{title:"规则来源",width:150,key:"ruleMode",render:function(t,e){var r={icon:"custom"===t.ruleMode?tt:nt};if("custom"===t.ruleMode){var a=[{label:"分享自定义规则",key:"shareCustomRule",icon:Dt(h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-fenxiang"},null)]),20)},{label:"清除自定义规则",key:"cleanCustomRule",icon:Dt(h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-qingchu"},null)]),20)}];return h(k("n-dropdown"),{onSelect:function(e,n){return Ct(e,n,t)},size:"large",trigger:"click",options:a},{default:function(){return[h(k("n-button"),{size:"small",dashed:!0,type:"info"},n({default:function(){return[L("自定义规则")]}},r))]}})}return h(k("n-button"),{size:"small",dashed:!0,type:"error",onClick:function(){return Pt(t)}},n({default:function(){return[L("系统规则")]}},r))}}],dt=y(),gt=A(),yt=H(),mt=m(function(){return{theme:dt.isDarkMode?N:U}}),vt=z(["message","modal","notification"],{configProviderProps:mt}),bt=(vt.message,vt.modal),kt=(vt.notification,o()),ht=g(!1),wt=g(!1);R();var xt=g(null);c(),v(),l();var _t=g("");function Dt(t,e){return function(){return S(V,{size:e},{default:function(){return S(t)}})}}var Lt=function(){var t=u(i().m(function t(){return i().w(function(t){for(;;)switch(t.n){case 0:if(kt.systemDotBlackList.length&&kt.hasHTMLViewerCloudData){t.n=1;break}return bt.create({title:"获取云控失败",type:"error",preset:"dialog",content:function(){return h("div",null,[h("p",null,[L("无法获取到HTML查看器的云控，请检查是否禁用云控或者清除HTML查看器的数据再重启平板尝试操作~")]),"Magisk"!==dt.currentRootManager&&h("p",null,[L("部分"),dt.currentRootManager,L("版本内置的Web UI存在异常，如仍然无法正常获取云控数据库，请单独安装模块网盘内提供的KsuWebUI。")])])}}),t.a(2);case 1:return t.n=2,dt.getAndroidApplicationPackageNameList();case 2:return t.n=3,kt.initDefault();case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),Mt=function(){var t=u(i().m(function t(){var e,n,r,o;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,j(yt.getList());case 1:e=t.v,n=a(e,2),r=n[0],o=n[1],r&&bt.create({title:"获取失败",type:"warning",preset:"dialog",content:function(){return h("p",null,[L("您的系统环境暂不支持该功能，获取失败~")])},negativeText:"确定"}),o&&bt.create({title:"获取成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("好耶OwO，已重新获取当前已安装的应用名称~")])},negativeText:"确定"});case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),Tt=function(){kt.filterInstalledApps=!kt.filterInstalledApps},Ot=function(){var t=u(i().m(function t(){var e,n,r,o,c;return i().w(function(t){for(;;)switch(t.n){case 0:if(kt.systemDotBlackList.length&&kt.hasHTMLViewerCloudData){t.n=1;break}return bt.create({title:"获取云控失败",type:"error",preset:"dialog",content:function(){return h("div",null,[h("p",null,[L("无法获取到HTML查看器的云控，请检查是否禁用云控或者清除HTML查看器的数据再重启平板尝试操作~")]),"Magisk"!==dt.currentRootManager&&h("p",null,[L("部分"),dt.currentRootManager,L("版本内置的Web UI存在异常，如仍然无法正常获取云控数据库，请单独安装模块网盘内提供的KsuWebUI。")])])}}),t.a(2);case 1:return wt.value=!0,t.n=2,Lt();case 2:return e=kt.mergeDotBlackList.map(function(t){return t.name}),t.n=3,j(B({dotBlackList:e,sourceDotBlackList:kt.sourceDotBlackList,customDotBlackList:kt.customDotBlackList}));case 3:n=t.v,r=a(n,2),o=r[0],c=r[1],o&&(bt.create({title:"热重载应用数据失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("热重载应用数据失败了QwQ，详情请查看错误日志~")])},negativeText:"确定"}),wt.value=!1),c&&(bt.create({title:"热重载应用数据成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("好耶w，已经重新为你载入包括自定义规则在内的应用数据~实际生效还需要重启")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("系统界面")])," ",L("的作用域，确定要继续吗？")])},positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick:function(){C().then(function(){var t=u(i().m(function t(e){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt();case 1:bt.create({title:"重启作用域成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("已经成功为你重启系统界面的作用域，请查看是否生效，如不生效请手动重启平板再查看效果~")])}});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){bt.create({title:"重启作用域失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])}})})}}),wt.value=!1);case 4:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),jt=function(){var t=u(i().m(function t(){var e,n,r,o;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,j(new Promise(function(t,e){bt.create({title:"想重启设备吗？",type:"info",preset:"dialog",content:function(){return h("div",null,[h("p",null,[L("是否立即重启设备，以使规则生效？")])])},positiveText:"确认重启",negativeText:"取消",onPositiveClick:function(){t("positiveClick")},onNegativeClick:function(){e("negativeClick")}})}));case 1:if(e=t.v,n=a(e,2),n[0],!n[1]){t.n=3;break}return t.n=2,j(P());case 2:if(r=t.v,o=a(r,1),!o[0]){t.n=3;break}return bt.create({title:"操作失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("无法重启设备，详情请查看日志记录~")])},negativeText:"确定"}),t.a(2);case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),Bt=function(){var t=u(i().m(function t(){var e,n,r,o,c,l,s,f,p,d,g,y;return i().w(function(t){for(;;)switch(t.n){case 0:if(kt.systemDotBlackList.length&&kt.hasHTMLViewerCloudData){t.n=1;break}return bt.create({title:"获取云控失败",type:"error",preset:"dialog",content:function(){return h("div",null,[h("p",null,[L("无法获取到HTML查看器的云控，请检查是否禁用云控或者清除HTML查看器的数据再重启平板尝试操作~")]),"Magisk"!==dt.currentRootManager&&h("p",null,[L("部分"),dt.currentRootManager,L("版本内置的Web UI存在异常，如仍然无法正常获取云控数据库，请单独安装模块网盘内提供的KsuWebUI。")])])}}),t.a(2);case 1:return _t.value="",t.n=2,j(new Promise(function(t,e){bt.create({title:"请粘贴分享口令",preset:"dialog",style:"min-width:500px; width:50%;",class:"responsive-modal",content:function(){return S(K,{type:"textarea",value:_t.value,"onUpdate:value":function(t){_t.value=t},autosize:{minRows:8,maxRows:8},placeholder:"在此处粘贴分享规则口令"})},positiveText:"确定提交",negativeText:"取消导入",onPositiveClick:function(){t("positiveClick")}})}));case 2:if(e=t.v,n=a(e,2),!n[1]){t.n=12;break}if(ht.value=!0,r=_t.value,null!=(o=Q(r))&&o.length){t.n=3;break}return bt.create({title:"导入分享规则失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("导入分享规则失败了QwQ，解析")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("自定义规则")])," ",L("口令发生错误，无法正常解析。")])},negativeText:"确定"}),ht.value=!1,t.a(2);case 3:if(t.p=3,c=F(o),l=J.inflate(c,{to:"string"}),"dot_black_list"===(s=JSON.parse(l)).type){t.n=4;break}return bt.create({title:"导入分享规则失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("导入分享规则失败了QwQ，该")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("自定义规则")])," ",L("不适用于窗口控制器。")])},negativeText:"确定"}),ht.value=!1,t.a(2);case 4:if(!("pad"===s.device&&"tablet"!==dt.deviceType||"fold"===s.device&&"tablet"===dt.deviceType)){t.n=5;break}return bt.create({title:"导入分享规则失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("导入分享规则失败了QwQ，平板和折叠屏的适配规则不能混用哦~")])},negativeText:"确定"}),ht.value=!1,t.a(2);case 5:if(!kt.allPackageName.has(s.name)){t.n=6;break}return bt.create({title:"应用包名已存在",type:"error",preset:"dialog",content:function(){return h("p",null,[L("这个应用包名已经存在列表中了,导入分享规则失败了！（敲")])}}),ht.value=!1,t.a(2);case 6:return kt.customDotBlackList.push(s.name),f=kt.mergeDotBlackList.map(function(t){return t.name}),t.n=7,j(B({dotBlackList:f,sourceDotBlackList:kt.sourceDotBlackList,customDotBlackList:kt.customDotBlackList}));case 7:if(p=t.v,d=a(p,2),g=d[0],d[1],!g){t.n=8;break}bt.create({title:"导入分享规则失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("发生异常错误，导入失败了QwQ，详细错误请查看错误日志~")])}}),ht.value=!1,t.n=10;break;case 8:return t.n=9,Lt();case 9:gt.updateMergeRuleList(),ht.value=!1,bt.create({title:"导入分享规则成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("好耶w，")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[I(s.name,dt.installedAppNameList[s.name]||gt.applicationName[s.name])])," ",L("的应用配置成功了OwO~实际生效还需要重启")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("系统界面")])," ",L("的作用域，确定要继续吗？")])},positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick:function(){C().then(function(){var t=u(i().m(function t(e){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt();case 1:bt.create({title:"重启作用域成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("已经成功为你重启系统界面的作用域，请查看是否生效，如不生效请手动重启平板再查看效果~")])}});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){bt.create({title:"重启作用域失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])}})})}});case 10:t.n=12;break;case 11:t.p=11,y=t.v,console.log(y,"error"),bt.create({title:"导入分享规则失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("解析分享规则失败了QwQ，请检查导入口令是否有误")])},negativeText:"确定"}),ht.value=!1;case 12:return t.a(2)}},t,null,[[3,11]])}));return function(){return t.apply(this,arguments)}}(),Ct=function(){var t=u(i().m(function t(e,n,r,o){var c,l,s,f,p,d,g,y;return i().w(function(t){for(;;)switch(t.n){case 0:if(kt.systemDotBlackList.length&&kt.hasHTMLViewerCloudData){t.n=1;break}return bt.create({title:"获取云控失败",type:"error",preset:"dialog",content:function(){return h("div",null,[h("p",null,[L("无法获取到HTML查看器的云控，请检查是否禁用云控或者清除HTML查看器的数据再重启平板尝试操作~")]),"Magisk"!==dt.currentRootManager&&h("p",null,[L("部分"),dt.currentRootManager,L("版本内置的Web UI存在异常，如仍然无法正常获取云控数据库，请单独安装模块网盘内提供的KsuWebUI。")])])}}),t.a(2);case 1:if("cleanCustomRule"===e&&(c=bt.create({title:"想清除自定义规则吗？",type:"warning",preset:"dialog",content:function(){return h("p",null,[L("清除自定义规则后，将恢复")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[I(r.name,r.applicationName)])," ",L("的窗口控制器显示效果。确定要继续吗？")])},positiveText:"确定清除",negativeText:"我再想想",onPositiveClick:function(){var t=u(i().m(function t(){var e,n,o,l;return i().w(function(t){for(;;)switch(t.n){case 0:return c.loading=!0,kt.customDotBlackList=kt.customDotBlackList.filter(function(t){return t!==r.name}),kt.sourceDotBlackList=kt.sourceDotBlackList.map(function(t){return t.dataList=t.dataList.filter(function(t){return t!==r.name}),t}),e=kt.mergeDotBlackList.map(function(t){return t.name}),t.n=1,j(B({dotBlackList:e,sourceDotBlackList:kt.sourceDotBlackList,customDotBlackList:kt.customDotBlackList}));case 1:if(n=t.v,o=a(n,2),l=o[0],o[1],!l){t.n=2;break}bt.create({title:"清除自定义规则失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("发生异常错误，清除失败了QwQ，详细错误请查看错误日志~")])}}),c.loading=!1,t.n=3;break;case 2:return c.loading=!1,bt.create({title:"清除自定义规则成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("好耶w，清除自定义规则成功了OwO~实际生效还需要重启")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("系统界面")])," ",L("的作用域，确定要继续吗？")])},positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick:function(){C().then(function(){var t=u(i().m(function t(e){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt();case 1:bt.create({title:"重启作用域成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("已经成功为你重启系统界面的作用域，请查看是否生效，如不生效请手动重启平板再查看效果~")])}});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){bt.create({title:"重启作用域失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])}})})}}),c.loading=!1,t.n=3,Lt();case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()})),"shareCustomRule"!==e){t.n=4;break}return l={name:r.name,cmpt:1,rules:{name:r.name},type:"dot_black_list",device:"tablet"===dt.deviceType?"pad":"fold"},s=JSON.stringify(l),f=J.deflate(s,{level:9,memLevel:9,windowBits:15}),p=new Uint8Array(f),d=G(p),t.n=2,j(navigator.clipboard.writeText("我分享了一个[窗口控制器]的自定义规则，可以前往[完美横屏应用计划 For Web UI]导入：\n".concat(d)));case 2:if(g=t.v,y=a(g,1),!y[0]){t.n=3;break}return bt.create({title:"复制分享口令失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("复制")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[I(r.name,r.applicationName)])," ",L("的分享口令失败了QwQ，可能由于没有读取/写入剪切板的权限或")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("自定义规则")])," ",L("长度过大。")])},negativeText:"确定"}),t.a(2);case 3:bt.create({title:"复制分享口令成功",type:"success",preset:"dialog",content:function(){return h("div",null,[h("p",null,[L("好耶w，复制")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[I(r.name,r.applicationName)])," ",L("分享口令成功了~")]),h("p",null,[L("如果没有复制成功，请确认是否给予了读取/写入剪切板的权限或")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("自定义规则")])," ",L("长度过大。")]),h("p",null,[L("分享口令导入入口位于")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("窗口控制器- 从分享口令导入")])," ",L("。")])])},positiveText:"确定"});case 4:return t.a(2)}},t)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),Pt=function(t,e){bt.create({title:"系统规则说明",type:"warning",preset:"dialog",content:function(){return h("p",null,[L("系统已对")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[I(t.name,t.applicationName)])," ",L("配置了窗口控制器的隐藏，且不可被移除，仅有自定义规则可以被移除哦~")])}})},St=function(){var t=u(i().m(function t(){var e,n,r,o,c,l,s,f;return i().w(function(t){for(;;)switch(t.n){case 0:if(kt.systemDotBlackList.length&&kt.hasHTMLViewerCloudData){t.n=1;break}return bt.create({title:"获取云控失败",type:"error",preset:"dialog",content:function(){return h("div",null,[h("p",null,[L("无法获取到HTML查看器的云控，请检查是否禁用云控或者清除HTML查看器的数据再重启平板尝试操作~")]),"Magisk"!==dt.currentRootManager&&h("p",null,[L("部分"),dt.currentRootManager,L("版本内置的Web UI存在异常，如仍然无法正常获取云控数据库，请单独安装模块网盘内提供的KsuWebUI。")])])}}),t.a(2);case 1:if(!xt.value){t.n=7;break}return t.n=2,j(xt.value.openDrawer());case 2:if(e=t.v,n=a(e,2),r=n[0],o=n[1],!r){t.n=3;break}console.log("操作取消:",r),t.n=7;break;case 3:return kt.customDotBlackList.push(o.name),c=kt.mergeDotBlackList.map(function(t){return t.name}),t.n=4,j(B({dotBlackList:c,sourceDotBlackList:kt.sourceDotBlackList,customDotBlackList:kt.customDotBlackList}));case 4:if(l=t.v,s=a(l,2),f=s[0],s[1],!f){t.n=5;break}bt.create({title:"应用添加失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("发生异常错误，添加失败了QwQ，详细错误请查看错误日志~")])}}),o.loadingCallback&&o.loadingCallback(),t.n=7;break;case 5:return bt.create({title:"应用添加成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("好耶w，已经成功配置")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[I(o.name,dt.installedAppNameList[o.name]||kt.applicationName[o.name])])," ",L("的窗口控制器隐藏效果了OwO~实际生效还需要重启")," ",h("span",{class:"font-bold ".concat(dt.isDarkMode?"text-teal-400":"text-gray-600")},[L("系统界面")])," ",L("的作用域，确定要继续吗？")])},positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick:function(){C().then(function(){var t=u(i().m(function t(e){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt();case 1:bt.create({title:"重启作用域成功",type:"success",preset:"dialog",content:function(){return h("p",null,[L("已经成功为你重启系统界面的作用域，请查看是否生效，如不生效请手动重启平板再查看效果~")])}});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){bt.create({title:"重启作用域失败",type:"error",preset:"dialog",content:function(){return h("p",null,[L("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])}})})}}),t.n=6,Lt();case 6:o.loadingCallback&&o.loadingCallback(),o.closeCallback&&o.closeCallback();case 7:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),Qt=b({page:1,pageSize:10,simple:!0,showSizePicker:!0,onChange:function(t){Qt.page=t},onUpdatePageSize:function(t){Qt.pageSize=t,Qt.page=1}});return function(t,n){var a=k("n-alert"),o=k("n-input-group"),i=k("n-card"),c=k("n-data-table");return f(),s("main",it,[p("div",ct,[p("div",lt,[n[9]||(n[9]=p("h3",{class:w("text-base font-semibold leading-7")},[p("span",{class:"animated-bg bg-clip-text font-semibold text-transparent",style:{"background-image":"linear-gradient(\r\n\t\t\t\t\t\t\t\t101.22deg,\r\n\t\t\t\t\t\t\t\trgb(255, 182, 133) -18.32%,\r\n\t\t\t\t\t\t\t\trgb(255, 111, 29) 7.01%,\r\n\t\t\t\t\t\t\t\trgb(252, 181, 232) 41.59%,\r\n\t\t\t\t\t\t\t\trgb(135, 148, 255) 70.98%,\r\n\t\t\t\t\t\t\t\trgb(60, 112, 255) 91.35%,\r\n\t\t\t\t\t\t\t\trgb(60, 112, 255) 110.17%\r\n\t\t\t\t\t\t\t)"}},"窗口控制器")],-1)),p("p",{class:w("mt-1 max-w-2xl text-sm leading-6 ".concat(x(dt).isDarkMode?"text-gray-300":"text-gray-500"))}," 窗口控制器，控制应用顶栏窗口控制器的显示或隐藏。 ",2)])]),h(i,{size:"small"},{default:_(function(){return[x(dt).androidTargetSdk<35?(f(),s("div",ut,[h(a,{"show-icon":!0,type:"warning"},{default:_(function(){return n[10]||(n[10]=[p("p",null,"经过测试效果在Hyper OS 1和基于Android 14的Hyper OS 2+体验不佳，极易被云控覆盖。",-1),p("p",null,"功能可以继续使用，但是不再对Hyper OS 1和基于Android 14的Hyper OS 2+下窗口控制器的缺陷和需求进行响应。",-1)])}),_:1,__:[10]})])):D("",!0),p("div",st,[h(x(W),{class:"mb-3 mr-3",type:"info",loading:x(dt).loading||x(kt).loading,onClick:St},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(Z))]}),_:1})]}),default:_(function(){return[n[11]||(n[11]=L(" 添加应用 "))]}),_:1,__:[11]},8,["loading"]),h(x(W),{class:"mb-3 mr-3",type:"success",loading:x(dt).loading||x(kt).loading,onClick:n[0]||(n[0]=function(){return Lt()})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(q))]}),_:1})]}),default:_(function(){return[n[12]||(n[12]=L(" 刷新应用列表 "))]}),_:1,__:[12]},8,["loading"]),h(x(W),{class:"mb-3 mr-3",color:"#8a2be2",loading:x(dt).loading||x(kt).loading,onClick:n[1]||(n[1]=function(){return Ot()})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(X))]}),_:1})]}),default:_(function(){return[n[13]||(n[13]=L(" 热重载应用数据 "))]}),_:1,__:[13]},8,["loading"]),h(x(W),{class:"mb-3 mr-3",color:"#69b2b6",loading:x(dt).loading||x(kt).loading||x(yt).loading.value,onClick:n[2]||(n[2]=function(t){return Mt()})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(et))]}),_:1})]}),default:_(function(){return[n[14]||(n[14]=L(" 获取已安装应用名称 "))]}),_:1,__:[14]},8,["loading"]),h(x(W),{class:"mb-3 mr-3",type:"warning",loading:x(dt).loading||x(kt).loading||ht.value,onClick:n[3]||(n[3]=function(t){return Bt()})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(rt))]}),_:1})]}),default:_(function(){return[n[15]||(n[15]=L(" 从分享口令导入 "))]}),_:1,__:[15]},8,["loading"]),h(x(W),{class:"mb-3 mr-3",type:"error",loading:x(dt).loading||x(kt).loading||ht.value,onClick:n[4]||(n[4]=function(t){return jt()})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(e))]}),_:1})]}),default:_(function(){return[n[16]||(n[16]=L(" 重启设备 "))]}),_:1,__:[16]},8,["loading"])]),p("div",ft,[h(x(W),{class:"mb-3 mr-3",type:x(kt).filterInstalledApps?"success":"info",strong:"",loading:x(dt).loading||x(kt).loading,secondary:"",onClick:Tt},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[x(kt).filterInstalledApps?(f(),T(x($),{key:0})):(f(),T(x(Y),{key:1}))]}),_:1})]}),default:_(function(){return[L(" "+M(x(kt).filterInstalledApps?"已安装应用":"全部应用"),1)]}),_:1},8,["type","loading"]),h(x(W),{class:"mb-3 mr-3",type:"warning",secondary:"",loading:x(dt).loading||x(kt).loading,onClick:n[5]||(n[5]=function(){return O()})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return n[17]||(n[17]=[p("img",{src:r},null,-1)])}),_:1,__:[17]})]}),default:_(function(){return[n[18]||(n[18]=L(" 应用抽屉 "))]}),_:1,__:[18]},8,["loading"])]),h(o,null,{default:_(function(){return[h(x(K),{size:"large",clearable:"",value:x(kt).searchKeyWord,"onUpdate:value":n[6]||(n[6]=function(t){return x(kt).searchKeyWord=t}),ref_key:"searchKeyWordInput",ref:d,placeholder:"搜索应用名称/应用包名",style:{width:"80%"}},null,8,["value"]),h(x(W),{size:"large",type:"primary",onClick:n[7]||(n[7]=function(){var t;null===(t=d.value)||void 0===t||t.blur()})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(at))]}),_:1})]}),default:_(function(){return[n[19]||(n[19]=p("span",{class:"hidden sm:inline-block"},"搜索",-1))]}),_:1,__:[19]}),h(x(W),{size:"large",bordered:"",onClick:n[8]||(n[8]=function(){x(kt).searchKeyWord=""})},{icon:_(function(){return[h(x(V),null,{default:_(function(){return[h(x(ot))]}),_:1})]}),default:_(function(){return[n[20]||(n[20]=p("span",{class:"hidden sm:inline-block"},"搜索",-1))]}),_:1,__:[20]})]}),_:1})]}),_:1}),h(c,{size:"small",loading:x(dt).loading||x(kt).loading,columns:x(pt),class:"mt-3",data:x(kt).filterMergeDotBlackList,pagination:Qt},null,8,["loading","columns","data","pagination"]),h(E,{ref_key:"addDotBlackListApp",ref:xt,type:"add",title:"添加应用"},null,512)])}}}))}}})}();
